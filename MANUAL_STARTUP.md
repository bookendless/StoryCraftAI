# 手動起動ガイド（Windows 11対応）

## 文字化け問題が発生する場合

Windows 11でバッチファイルが文字化けする場合は、以下の方法で手動起動してください。

### 方法1: PowerShellから起動（推奨）

1. **フォルダ内でPowerShellを開く**
   - フォルダ内で `Shift + 右クリック`
   - `PowerShellウィンドウをここで開く` を選択

2. **依存関係をインストール（初回のみ）**
   ```powershell
   npm install
   ```

3. **アプリをビルド（初回のみ）**
   ```powershell
   npm run build
   ```

4. **サーバーを起動**
   ```powershell
   node server/index.local.cjs
   ```

5. **ブラウザでアクセス**
   - 自動で開かない場合: http://localhost:5000

### 方法2: コマンドプロンプトから起動

1. **フォルダ内でコマンドプロンプトを開く**
   - フォルダのアドレスバーで `cmd` と入力してEnter

2. **コマンドを順番に実行**
   ```cmd
   npm install
   npm run build
   node server\index.local.cjs
   ```

### 方法3: 文字エンコーディング修正

1. **コマンドプロンプトで文字エンコーディングを設定**
   ```cmd
   chcp 65001
   start-local-simple.bat
   ```

2. **または、PowerShellで**
   ```powershell
   [Console]::OutputEncoding = [System.Text.Encoding]::UTF8
   .\start-local-simple.bat
   ```

## 起動確認

正常に起動すると以下のメッセージが表示されます：

```
=== AIストーリービルダー ローカル版 ===
Node.js version: v20.x.x
Platform: win32

🚀 AIストーリービルダー（ローカル版）が起動しました！
📱 アプリケーション: http://localhost:5000
💾 データベース: メモリストレージ
🤖 AI: 基本補完機能 + Ollama対応
🖥️ プラットフォーム: win32
📊 サンプルプロジェクト: 1個

終了するには Ctrl+C を押してください。
```

## トラブルシューティング

### エラー「Node.jsが見つかりません」
- Node.jsをインストール: https://nodejs.org/
- インストール後、新しくコマンドプロンプトを開く

### エラー「パッケージが見つかりません」
```cmd
npm cache clean --force
npm install
```

### エラー「ポートが使用中」
- 他のNode.jsプロセスを終了
- またはアプリが自動で別ポート（5001等）を使用

### ブラウザが開かない
手動でアクセス：
- http://localhost:5000
- または http://localhost:5001

### データが保存されない
**重要**: 現在はメモリストレージのため、アプリを終了するとデータは消失します。
- 重要な内容は別途保存してください

## アプリの使い方

### プロジェクト作成後の操作
1. **サイドバー**: 左側のメニューで各ステップを選択
2. **キャラクター**: AIボタンで自動補完
3. **プロット**: 構成提案機能
4. **あらすじ**: キャラクター・プロット情報から自動生成

### データの永続化について
現在のローカル版は**一時保存**です：
- アプリ終了時にデータ消失
- 将来のアップデートで永続保存機能を追加予定
- 現在は作業中のテキストを定期的にコピー保存推奨

## 最終手段

すべて失敗した場合：
1. Node.js v18以上が正しくインストールされていることを確認
2. フォルダの読み書き権限を確認
3. ウイルス対策ソフトの除外設定
4. Windowsの文字コード設定を確認